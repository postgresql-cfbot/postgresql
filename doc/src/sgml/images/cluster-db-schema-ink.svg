<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   width="900px"
   height="685px"
   viewBox="0 0 900 685"
   id="svg165"
   sodipodi:docname="cluster-db-schema-ink.svg"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)">
  <metadata
     id="metadata169">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title>Server (Hardware, Container, or VM)</dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="780"
     inkscape:window-height="480"
     id="namedview167"
     showgrid="false"
     inkscape:zoom="0.34452555"
     inkscape:cx="450"
     inkscape:cy="342.5"
     inkscape:window-x="66"
     inkscape:window-y="27"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg165" />
  <title
     id="title2">Server (Hardware, Container, or VM)</title>
  <!-- common text classes -->
  <style
     type="text/css"
     id="style4">
  .text_small   {font-style:normal;
                 font-weight:normal;
                 font-size:12px;
                 font-family:&quot;Open Sans&quot;, sans-serif;
                 fill:black;
                }
  .text_normal  {font-style:normal;
                 font-weight:normal;
                 font-size:14px;
                 font-family:&quot;Open Sans&quot;, sans-serif;
                 fill:black;
                }
  .text_big     {font-style:normal;
                 font-weight:normal;
                 font-size:24px;
                 font-family:&quot;Open Sans&quot;, sans-serif;
                 fill:black;
                }
  </style>
  <defs
     id="defs57">
    <!-- a rectangle with rounded corners and inner definitions for schemas -->
    <symbol
       id="rectangle_special_0">
      <!-- the database -->
      <rect
         width="225"
         height="155"
         rx="10"
         stroke="blue"
         fill="none"
         id="rect6" />
    </symbol>
    <!-- a rectangle with rounded corners and inner definitions for schemas -->
    <symbol
       id="rectangle_special_1">
      <!-- the database -->
      <rect
         width="225"
         height="155"
         rx="10"
         stroke="blue"
         fill="none"
         id="rect9" />
      <!-- schemas -->
      <rect
         x="15"
         y="40"
         width="195"
         height="50"
         rx="10"
         stroke="blue"
         fill="none"
         stroke-dasharray="4 2"
         id="rect11" />
      <text
         class="text_normal"
         x="20"
         y="60"
         id="text13">schema 'public'</text>
      <text
         class="text_small"
         x="25"
         y="80"
         id="text15">tables, views, ...</text>
      <rect
         x="15"
         y="105"
         width="195"
         height="30"
         rx="10"
         stroke="blue"
         fill="none"
         stroke-dasharray="4 2"
         id="rect17" />
      <text
         class="text_small"
         x="20"
         y="125"
         id="text19">System schemas</text>
    </symbol>
    <!-- same as before, but one more schema -->
    <symbol
       id="rectangle_special_2">
      <!-- the database -->
      <rect
         width="245"
         height="225"
         rx="10"
         stroke="blue"
         fill="none"
         id="rect22" />
      <!-- schemas -->
      <rect
         x="15"
         y="40"
         width="205"
         height="50"
         rx="10"
         stroke="blue"
         fill="none"
         stroke-dasharray="4 2"
         id="rect24" />
      <text
         class="text_normal"
         x="20"
         y="60"
         id="text26">schema 'public'</text>
      <text
         class="text_small"
         x="25"
         y="80"
         id="text28">tables, views, ...</text>
      <rect
         x="15"
         y="105"
         width="205"
         height="30"
         rx="10"
         stroke="blue"
         fill="none"
         stroke-dasharray="4 2"
         id="rect30" />
      <text
         class="text_small"
         x="20"
         y="125"
         id="text32">System schemas</text>
      <rect
         x="15"
         y="150"
         width="205"
         height="50"
         rx="10"
         stroke="blue"
         fill="none"
         stroke-dasharray="4 2"
         id="rect34" />
      <text
         class="text_normal"
         x="20"
         y="170"
         id="text36">'my_schema' (optional)</text>
      <text
         class="text_small"
         x="25"
         y="185"
         id="text38">tables, views, ...</text>
    </symbol>
    <symbol
       id="note_0"
       stroke="black"
       fill="lightyellow">
      <title
         id="title41">UML Note</title>
      <path
         d="M 190,10 v 70 h -190 v -80 h 180 v 10 h 10 l -10,-10"
         id="path43" />
    </symbol>
    <symbol
       id="note_1"
       stroke="black"
       fill="lightyellow">
      <title
         id="title46">UML Note</title>
      <path
         d="M 450,10 v 240 h -450 v -250 h 440 v 10 h 10 l -10,-10"
         id="path48" />
    </symbol>
    <!-- marker start/end -->
    <marker
       id="arrowhead_start"
       markerWidth="10"
       markerHeight="10"
       refX="0"
       refY="3"
       orient="auto">
      <path
         d="M 6,0 l -6,3 l 6,3"
         stroke="black"
         fill="none"
         id="path51" />
    </marker>
    <marker
       id="arrowhead_end"
       markerWidth="10"
       markerHeight="10"
       refX="6"
       refY="3"
       orient="auto">
      <path
         d="M 0,0 l 6,3 l -6,3"
         stroke="black"
         fill="none"
         id="path54" />
    </marker>
  </defs>
  <!-- start of rendering area -->
  <!-- enclosing rectangle -->
  <rect
     x="1"
     y="1"
     rx="5"
     width="99%"
     height="99%"
     stroke="black"
     fill="none"
     id="rect59" />
  <text
     class="text_big"
     x="270"
     y="40"
     id="text61">Server (Hardware, Container, or VM)</text>
  <!-- two clusters -->
  <g
     transform="translate(20 110)"
     id="g67">
    <rect
       x="0"
       y="0"
       width="790"
       height="555"
       stroke="blue"
       stroke-width="2px"
       fill="none"
       id="rect63" />
    <text
       class="text_normal"
       x="180"
       y="25"
       id="text65">cluster 'data' (default, managed by one instance)</text>
  </g>
  <g
     transform="translate(45 110)"
     id="g73">
    <path
       d="M 5,0 v -30 h 790 v 555 h -30"
       stroke="blue"
       stroke-width="2px"
       fill="none"
       id="path69" />
    <text
       class="text_normal"
       x="190"
       y="-10"
       id="text71">cluster 'cluster_2' (optional, managed by a different instance)</text>
  </g>
  <!-- database template 0 -->
  <g
     transform="translate(40 155)"
     id="g89">
    <use
       xlink:href="#rectangle_special_0"
       id="use75" />
    <text
       class="text_normal"
       x="10"
       y="25"
       id="text77">database 'template0'</text>
    <use
       xlink:href="#note_0"
       x="20"
       y="40"
       id="use79" />
    <text
       class="text_small"
       x="30"
       y="60"
       id="text81">'template0' is a pristine</text>
    <text
       class="text_small"
       x="30"
       y="75"
       id="text83">and unchangeable template.</text>
    <text
       class="text_small"
       x="30"
       y="90"
       id="text85">It is used to generate</text>
    <text
       class="text_small"
       x="30"
       y="105"
       id="text87">database 'template1'.</text>
  </g>
  <!-- database template 1 -->
  <g
     transform="translate(290 155)"
     id="g95">
    <use
       xlink:href="#rectangle_special_1"
       id="use91" />
    <text
       class="text_normal"
       x="10"
       y="25"
       id="text93">database 'template1'</text>
  </g>
  <!-- database postgres -->
  <g
     transform="translate(540 155)"
     id="g101">
    <use
       xlink:href="#rectangle_special_2"
       id="use97" />
    <text
       class="text_normal"
       x="10"
       y="25"
       id="text99">database 'postgres'</text>
  </g>
  <!-- database my_db -->
  <g
     transform="translate(40 350)"
     id="g107">
    <use
       xlink:href="#rectangle_special_2"
       id="use103" />
    <text
       class="text_normal"
       x="10"
       y="25"
       id="text105">database 'my_db' (optional)</text>
  </g>
  <!-- global objects -->
  <g
     transform="translate(320 330)"
     id="g119">
    <rect
       x="0"
       y="0"
       width="180"
       height="45"
       rx="10"
       stroke="blue"
       fill="none"
       stroke-dasharray="10 4 4 4"
       id="rect109" />
    <text
       class="text_normal"
       x="15"
       y="27"
       id="text111">Global SQL objects</text>
    <path
       d="M 80,0 v-30"
       stroke="black"
       fill="none"
       marker-end="url(#arrowhead_end)"
       id="path113" />
    <path
       d="M 180,40 h50"
       stroke="black"
       fill="none"
       marker-end="url(#arrowhead_end)"
       id="path115" />
    <path
       d="M 0,40 l-45,20"
       stroke="black"
       fill="none"
       marker-end="url(#arrowhead_end)"
       id="path117" />
  </g>
  <!-- Some comments -->
  <g
     transform="translate(335 405)"
     id="g163">
    <use
       xlink:href="#note_1"
       x="0"
       y="0"
       id="use121" />
    <text
       class="text_small"
       x="10"
       y="20"
       id="text123">1)</text>
    <text
       class="text_small"
       x="30"
       y="20"
       id="text125">By default, clients connect via port '5432' to Cluster 'data',</text>
    <text
       class="text_small"
       x="30"
       y="35"
       id="text127">database 'postgres', schema 'public'. Of course, they can</text>
    <text
       class="text_small"
       x="30"
       y="50"
       id="text129">specify other connection properties.</text>
    <text
       class="text_small"
       x="10"
       y="70"
       id="text131">2)</text>
    <text
       class="text_small"
       x="30"
       y="70"
       id="text133">System schemas: pg_catalog, information_schema,</text>
    <text
       class="text_small"
       x="30"
       y="85"
       id="text135">pg_temp, ...</text>
    <text
       class="text_small"
       x="10"
       y="105"
       id="text137">3)</text>
    <text
       class="text_small"
       x="30"
       y="105"
       id="text139">Global SQL objects: Objects which are shared among all</text>
    <text
       class="text_small"
       x="30"
       y="120"
       id="text141">databases within a Cluster.</text>
    <text
       class="text_small"
       x="10"
       y="140"
       id="text143">4)</text>
    <text
       class="text_small"
       x="30"
       y="140"
       id="text145">The command 'initdb' creates a new cluster with the three</text>
    <text
       class="text_small"
       x="30"
       y="155"
       id="text147">databases 'template0', 'template1', and 'postgres'. The command</text>
    <text
       class="text_small"
       x="30"
       y="170"
       id="text149">'createdb' creates a new database.</text>
    <text
       class="text_small"
       x="10"
       y="190"
       id="text151">5)</text>
    <text
       class="text_small"
       x="30"
       y="190"
       id="text153">If multiple clusters are active on one server at the same time,</text>
    <text
       class="text_small"
       x="30"
       y="205"
       id="text155">each one is managed by an individual instance. Each such instance</text>
    <text
       class="text_small"
       x="30"
       y="220"
       id="text157">uses a different port.</text>
    <text
       class="text_small"
       x="10"
       y="240"
       id="text159">6)</text>
    <text
       class="text_small"
       x="30"
       y="240"
       id="text161">Client application are prohibited from connecting to 'template0'.</text>
  </g>
</svg>
